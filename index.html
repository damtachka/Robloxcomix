<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>RBXGAME</title>
  <style>
    body {
      margin: 0;
      font-family: 'Arial Black', sans-serif;
      background: #3498db url('https://i.ibb.co/1zXNkzt/bg-pixels.png') repeat;
      color: #fff;
      text-align: center;
      animation: fadeIn 1s ease-out;
    }
    @keyframes fadeIn {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }

    .container {
      max-width: 480px;
      margin: auto;
      padding: 20px;
    }
    .title {
      background: #fff;
      color: #e74c3c;
      font-size: 32px;
      padding: 15px;
      border-radius: 15px;
      box-shadow: 0 5px #222;
      margin-bottom: 30px;
    }
    .title span {
      display: block;
      color: #f1c40f;
      font-size: 24px;
    }
    .btn {
      display: block;
      width: 100%;
      padding: 16px;
      font-size: 20px;
      margin: 10px 0;
      border: none;
      border-radius: 12px;
      box-shadow: 0 5px #222;
      cursor: pointer;
      color: #fff;
      font-weight: bold;
      transition: transform 0.1s ease;
    }
    .btn:active {
      transform: translateY(3px);
      box-shadow: 0 2px #111;
    }
    .yellow { background: #f1c40f; color: #111; }
    .blue { background: #3498db; }
    .red { background: #e74c3c; }
    .green { background: #2ecc71; }
    .purple { background: #9b59b6; }
    .section { display: none; margin-top: 20px; }
    .active-section { display: block; }
    .profile-info, .game-area { margin-top: 20px; }
    .history {
      margin-top: 20px;
      text-align: left;
    }
    .history-item {
      padding: 10px;
      background: #333;
      margin-bottom: 5px;
      border-radius: 8px;
    }
    .avatar {
      border-radius: 50%;
      border: 3px solid #fff;
      width: 60px;
    }
    .nickname {
      font-weight: bold;
      color: #f1c40f;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="title">
      RBXGAME<br><span>Мини-Игры</span>
    </div>

    <div id="balance-display">Баланс: <span id="robux-balance">0</span> Robux</div>

    <div id="profile-header">
      <img src="https://www.roblox.com/headshot-thumbnail/image?userId=1&width=150&height=150&format=png" class="avatar" alt="avatar" />
      <p id="nickname">Игрок</p>
    </div>

    <button class="btn yellow" onclick="toggleSection('games')">Играть с Ботом</button>
    <button class="btn green" onclick="toggleSection('profile')">Профиль</button>
    <button class="btn blue" onclick="toggleSection('history')">История Игры</button>

    <!-- Игры -->
    <div id="games" class="section">
      <h3>Выбери игру</h3>
      <button class="btn red" onclick="selectGame('rps')">Камень-Ножницы-Бумага</button>
      <button class="btn purple" onclick="selectGame('guess')">Угадай число</button>
      <button class="btn blue" onclick="selectGame('reaction')">Реакция</button>
    </div>

    <!-- Профиль -->
    <div id="profile" class="section profile-info">
      <img src="https://www.roblox.com/headshot-thumbnail/image?userId=1&width=150&height=150&format=png" class="avatar" alt="avatar" />
      <p>Текущий баланс: <span id="profile-balance">0</span> Robux</p>
      <button class="btn green" onclick="alert('Вывод недоступен в демо.')">Вывести</button>
    </div>

    <!-- История Игры -->
    <div id="history" class="section history">
      <h3>История Игры</h3>
      <div id="game-history"></div>
    </div>

    <!-- Игровая зона -->
    <div id="game-area" class="section game-area"></div>
  </div>

  <script>
    let robux = parseFloat(localStorage.getItem('robux') || 0);
    let nickname = localStorage.getItem('nickname') || 'Игрок';
    let gameHistory = JSON.parse(localStorage.getItem('gameHistory')) || [];
    updateBalance();

    // Установим ник и аватарку
    document.getElementById('nickname').innerText = nickname;
    document.getElementById('profile-balance').innerText = robux.toFixed(1);
    document.getElementById('robux-balance').innerText = robux.toFixed(1);

    function toggleSection(id) {
      document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
      document.getElementById(id).style.display = 'block';
      updateBalance();
    }

    function updateBalance() {
      document.getElementById('robux-balance').innerText = robux.toFixed(1);
      document.getElementById('profile-balance').innerText = robux.toFixed(1);
    }

    // История игр
    function updateHistory() {
      const historyContainer = document.getElementById('game-history');
      historyContainer.innerHTML = '';
      gameHistory.forEach(item => {
        const historyItem = document.createElement('div');
        historyItem.classList.add('history-item');
        historyItem.innerHTML = `${item.date}: ${item.game} - ${item.result}`;
        historyContainer.appendChild(historyItem);
      });
    }

    function selectGame(game) {
      const gameArea = document.getElementById('game-area');
      toggleSection('game-area');
      let html = `<h3>Сложность</h3>
        <button class="btn green" onclick="startGame('${game}', 'easy')">Легко (0.1)</button>
        <button class="btn yellow" onclick="startGame('${game}', 'medium')">Средне (0.3)</button>
        <button class="btn red" onclick="startGame('${game}', 'hard')">Сложно (0.5)</button>`;
      gameArea.innerHTML = html;
    }

    function startGame(game, difficulty) {
      const gameArea = document.getElementById('game-area');
      if (game === 'rps') startRPS(difficulty, gameArea);
      if (game === 'guess') startGuess(difficulty, gameArea);
      if (game === 'reaction') startReaction(difficulty, gameArea);
    }

    // Камень-Ножницы-Бумага
    function startRPS(difficulty, area) {
      area.innerHTML = `<h3>Выбери:</h3>
        <button class="btn blue" onclick="playRPS('Камень', '${difficulty}')">Камень</button>
        <button class="btn yellow" onclick="playRPS('Ножницы', '${difficulty}')">Ножницы</button>
        <button class="btn red" onclick="playRPS('Бумага', '${difficulty}')">Бумага</button>`;
    }

    function playRPS(userChoice, difficulty) {
      const choices = ['Камень', 'Ножницы', 'Бумага'];
      let botChoice = choices[Math.floor(Math.random() * 3)];
      let result = '';

      if (userChoice === botChoice) result = 'Ничья!';
      else if (
        (userChoice === 'Камень' && botChoice === 'Ножницы') ||
        (userChoice === 'Ножницы' && botChoice === 'Бумага') ||
        (userChoice === 'Бумага' && botChoice === 'Камень')
      ) result = 'Победа!';
      else result = 'Поражение!';

      showResult(result, difficulty);
    }

    // Угадай число
    function startGuess(difficulty, area) {
      const max = difficulty === 'easy' ? 3 : difficulty === 'medium' ? 5 : 7;
      const number = Math.floor(Math.random() * max) + 1;
      area.innerHTML = `<h3>Угадай число от 1 до ${max}</h3>
        <input type="number" id="guess-input" min="1" max="${max}" />
        <button class="btn green" onclick="checkGuess(${number}, '${difficulty}')">Проверить</button>`;
    }

    function checkGuess(correct, difficulty) {
      const guess = parseInt(document.getElementById('guess-input').value);
      const result = guess === correct ? 'Победа!' : `Поражение! Было число ${correct}`;
      showResult(result, difficulty, guess === correct);
    }

    // Реакция
    function startReaction(difficulty, area) {
      area.innerHTML = `<h3>Нажми как только увидишь кнопку!</h3>
        <p id="reaction-message">Жди...</p>`;
      setTimeout(() => {
        const start = Date.now();
        document.getElementById('reaction-message').innerHTML = `<button class="btn red" onclick="finishReaction(${start}, '${difficulty}')">ЖМИ!</button>`;
      }, Math.random() * 3000 + 2000);
    }

    function finishReaction(startTime, difficulty) {
      const time = Date.now() - startTime;
      const success = difficulty === 'easy' ? time < 1500 :
                      difficulty === 'medium' ? time < 1000 :
                      time < 700;
      const result = success ? `Победа! Время реакции: ${time} мс` : `Поражение! Время: ${time} мс`;
      showResult(result, difficulty, success);
    }

    // Результат и начисление
    function showResult(message, difficulty, won = null) {
      let reward = difficulty === 'easy' ? 0.1 : difficulty === 'medium' ? 0.3 : 0.5;
      if (won === null) won = message.includes('Победа');
      if (won) {
        robux += reward;
        localStorage.setItem('robux', robux.toFixed(1));
        gameHistory.push({
          game: message.includes('Камень-Ножницы-Бумага') ? 'Камень-Ножницы-Бумага' : message.includes('Угадай число') ? 'Угадай число' : 'Реакция',
          result: message,
          date: new Date().toLocaleString()
        });
        localStorage.setItem('gameHistory', JSON.stringify(gameHistory));
        alert(`${message} +${reward} Robux`);
      } else {
        alert(message);
      }

      updateHistory();
      setTimeout(() => {
        toggleSection('games');
      }, 3000);
    }
  </script>
</body>
</html>
